<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>
    Tableau de bord
  </title>
  <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="./css/main2.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery.js"></script>

  <script type="text/javascript">
  $(function () {
    $.get('../data-monitoring2.php?limit=100', function(data){
      data = JSON.parse(data);
      var values = {
        tupleSon: [],
        humidity: [],
        lumiere: [],
        temperature: [],
        moyenneSon: []
      };
      var lastValues = {
        tupleSon: [],
        humidity: [],
        lumiere: [],
        temperature: [],
        moyenneSon: []
      };

      var datalength = data.length;
      for(var i = 0 ; i < datalength; i++){
        values.tupleSon.push([Date.parse(data[i].date), parseFloat(data[i].sonMin), parseFloat(data[i].sonMax)]);
        values.moyenneSon.push([Date.parse(data[i].date), parseFloat(data[i].sonMoy)]);
        values.humidity.push([Date.parse(data[i].date), parseFloat(data[i].humidity)]);
        values.lumiere.push([Date.parse(data[i].date), parseFloat(data[i].lumiere)]);
        values.temperature.push([Date.parse(data[i].date), parseFloat(data[i].temperature)]);
      }
      lastValues.moyenneSon.push(values.moyenneSon[values.moyenneSon.length -1][1]);
      lastValues.humidity.push(values.humidity[values.humidity.length -1][1]);
      lastValues.lumiere.push(values.lumiere[values.lumiere.length -1][1]);
      lastValues.temperature.push(values.temperature[values.temperature.length -1][1]);
      //Voir Main.js
      generateGraph(values);
      majJauge(lastValues);
    });
});
</script>
</head> 
<body>
  <div class="container">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <div class="row">
          <div class="col-md-12" style="text-align: center;">
            <h4>Valeurs instantanées</h4>
          </div>
        </div>
      </div>
      <div class="panel-body">
        <div class="row">
          <div class="col-md-3">
            <div id="jaugeTemperature" style="min-width: 310px; max-width: 400px; height: 300px; margin: 0 auto"></div>
          </div>
          <div class="col-md-3">
            <div id="jaugeSon" style="min-width: 310px; max-width: 400px; height: 300px; margin: 0 auto"></div>
          </div>
          <div class="col-md-3">
            <div id="jaugeHumidite" style="min-width: 310px; max-width: 400px; height: 300px; margin: 0 auto"></div>
          </div>
          <div class="col-md-3">
            <div id="jaugeLumiere" style="min-width: 310px; max-width: 400px; height: 300px; margin: 0 auto"></div>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <div class="panel panel-primary">
      <div class="panel-heading">
        <div class="row">
          <div class="col-md-12" style="text-align: center;">
            <h4>Valeurs au cours du temps</h4>
          </div>
        </div>
      </div>
      <div class="panel-body">
        <div class="btn-group-wrap">
          <div class="btn-group">
            <a href="#" class="btn btn-lg btn-default">Heure</a>
            <a href="#" class="btn btn-lg btn-default">Journée</a>
            <a href="#" class="btn btn-lg btn-default">Semaine</a>
            <a href="#" class="btn btn-lg btn-default">Mois</a>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div id="main-graph" style="min-width: 280px; height: 600px; margin: 0 auto"></div>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <footer>
    </footer>
  </div>
  <!-- /container -->
  <script src="bootstrap/js/bootstrap.min.js"></script>
  <script src="../monitoring/Highcharts/js/highcharts.js"></script>
  <script src="../monitoring/Highcharts/js/modules/exporting.js"></script>
  <script src="../monitoring/Highcharts/js/highcharts-more.js"></script>
  <script src="./js/main.js"></script>
</body>

</html>